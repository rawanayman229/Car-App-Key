    <!doctype html>
    <html lang="en">
    <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Service Types</title>

    <!-- CSS Links-->
    <link rel="stylesheet" href="../assets/css/bootstrap.min.css" />
    <link rel="stylesheet" href="../assets/css/all.min.css" />
    <link rel="stylesheet" href="styles.css" />
    <link
      rel="stylesheet"
      href="https://cdn.datatables.net/1.13.6/css/dataTables.bootstrap5.min.css"/>
  </head>
  <body>
    <!-- Start Of Static Section (Side Bar) -->

    <!-- Sidebar Toggle Overlay (Mobile and Tablet) -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>

      <!-- ===== Sidebar (Desktop) ===== -->
    <aside class="sidebar d-flex flex-column" id="sidebar">
      <!-- 1. Header Section -->
      <div class="sidebar-header">
        <!-- Logo Text -->
        <div class="logo">
          <h4>SecureAccess Pro</h4>
          <p>Company Admin</p>
        </div>

        <!-- Close button (Mobile) -->
        <button class="btn d-md-none text-muted" id="closeSidebar">
          <i class="fas fa-times"></i>
        </button>
      </div>

      <!-- 2. Navigation Menu -->
      <ul class="menu flex-grow-1">
        <li data-page="dashboard" class="active">
          <a href="dashboard.html">
            <i class="fa-solid fa-table-cells-large"></i>
            Dashboard
          </a>
        </li>

        <li data-page="jobs">
          <a href="jobs.html">
            <i class="fa-solid fa-suitcase"></i>
            Jobs
          </a>
        </li>

        <li data-page="codes">
          <a href="codes.html">
            <i class="fa-solid fa-key"></i></i>
            Code Request
          </a>
        </li> 

        <li data-page="technicians">
          <a href="technicians.html">
            <i class="fa-solid fa-user-group"></i>
            Technicians
          </a>
        </li>

        <li data-page="financials">
          <a href="financials.html">
            <i class="fa-solid fa-dollar-sign"></i>
            Financials
          </a>
        </li>

        <li data-page="reports">
          <a href="reports.html">
            <i class="fa-regular fa-file-lines"></i>
            Reports
          </a>
        </li>

        <li data-page="company-area">
          <a href="company-area.html">
            <i class="fa-solid fa-building"></i>
            Company Area
          </a>
        </li>
        
        <li data-page="settings">
          <a href="settings.html">
            <i class="fa-solid fa-gear"></i>
            Settings
          </a>
        </li>
      </ul>
      <!-- 3. Sidebar Footer (User Profile) -->
      <div class="sidebar-footer">
        <div class="d-flex align-items-center gap-3">
          <!-- Avatar Circle -->
          <div class="user-avatar" id="userAvatar">AU</div>

          <!-- Text Info -->
          <div class="user-info">
            <h6 id="sidebarUsername">Admin User</h6>
            <small id="sidebarEmail">Elite Locksmith Co.</small>
          </div>
        </div>
      </div>
    </aside>
    <!-- End OF Sidebar -->

    <!-- ===== Main Wrapper (Content) ===== -->
    <main class="main-wrapper" id="mainWrapper">
      <!-- Mobile Header (Visible only on mobile/tablet to toggle sidebar) -->
      <div
        class="d-lg-none p-3 bg-white border-bottom d-flex align-items-center justify-content-between sticky-top">
        <h5 class="m-0 fw-bold text-dark">SecureAccess Pro</h5>
        <button class="btn btn-light" id="toggleSidebar">
          <i class="fas fa-bars"></i>
        </button>
      </div>

      <!-- Main Content Area -->
      <!-- Header -->
    <div class="d-flex justify-content-between mb-4">
      <div class="d-flex flex-column justify-content-left">
        <h3 class="page-title">Service Types</h3>
        <p class="page-subtitle">Manage service types used in jobs and technician assignments.</p>
      </div>

        <!-- Add Service Button -->
        <div class="col-lg-2">
          <button class="btn primary-btn w-100" data-bs-toggle="modal" data-bs-target="#addServiceModal">
            <i class="fas fa-plus me-2"></i> Add Service Type
          </button>
        </div>
      </div>

      <div class="row content gap-3 align-items-center mb-3">
        <!-- ===== Search + Filter Section ===== -->
        <!-- Search -->
        <div class="col-lg-8">
          <div class="search-box">
            <i class="fas fa-search"></i>
            <input type="text" id="customSearch" placeholder="Search by service name or category..." />
          </div>
        </div>

        <!-- Status -->
        <div class="filter col-lg-3">
          <select id="statusFilter">
            <option value="">All Statuses</option>
            <option>Active</option>
            <option>Inactive</option>
          </select>
        </div>
        </div>

   <!-- Table -->
      <div class="card-box">
      <div  class="table-responsive mt-3">
        <table id="servicesTable" class="table w-100">
          <thead>
            <tr>
              <th>Service Name</th>
              <th>Description</th>
              <th>Category</th>
              <th>Status</th>
              <th>Created At</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
      </div>
    </main>

    <!-- Add Service Modal -->
    <div class="modal fade" id="addServiceModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content add-service-modal">

      <!-- Header -->
      <div class="modal-header border-0 pb-0">
        <h5 class="modal-title fw-bold">Add New Service Type</h5>
        <P class="modal-subtitle">Fill in the details to create a new service type</P>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>

      <!-- Body -->
      <div class="modal-body pt-2">

        <!-- Service Name -->
        <div class="mb-3">
          <label class="form-label">Service Name <span class="required"></span></label>
          <input id="serviceName" type="text" class="form-control" placeholder="e.g., HVAC Installation" required>
        </div>

        <!-- Description -->
        <div class="mb-3">
          <label class="form-label">Description</label>
          <input id="description" type="text" class="form-control" placeholder="Brief description of this service type...">
        </div>

        <!-- Category -->
        <div class="mb-3">
          <label class="form-label">Category</label>
          <input id="category" type="text" class="form-control" placeholder="e.g., Installation, Repair, Maintenance">
        </div>

        <!-- Status -->
        <div class="mb-3">
          <label class="form-label">Status</label>
          <select id="status" class="form-select">
            <option>Active</option>
            <option>In Active</option>
          </select>
         <P class="modal-subtitle mt-3">Only active service types will be available in selection lists</P>
        </div>
      </div>

      <!-- Footer -->
      <div class="modal-footer">
        <button class="btn secondary-btn " data-bs-dismiss="modal">
          Cancel
        </button>
        <button id="createServiceBtn" class="btn primary-btn px-5">
         Create Service Type
        </button>
      </div>

    </div>
    </div>
    </div>
    <!-- End Of Add User Modal -->

    <!-- End of Main Wrapper -->

    <!-- JS Files -->
    <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.6/js/dataTables.bootstrap5.min.js"></script>
    <script src="../assets/js/bootstrap.bundle.min.js"></script>
    <script src="script.js"></script>

    <!-- Internal Script -->
    <script>

      // Inintal Table
      let servicesTable;
      const SERVICES = [
        {
          service: "HVAC Installation",
          description: "Complete heating, ventilation, and air conditioning system",
          category: "Installation",
          status: "Active",
          date: "Jan 10, 2024",
        },
        {
          service: "HVAC Repair",
          description: "Diagnostic and repair services for HVAC systems",
          category: "Repair",
          status: "Active",
          date: "Jan 10, 2024",
        },
         {
          service: "Preventive Maintenance",
          description: "Scheduled maintenance and inspection services",
          category: "Maintenance",
          status: "Active",
          date: "Jan 10, 2024",
        },
         {
          service: "HVAC Repair",
          description: "Diagnostic and repair services for HVAC systems",
          category: "Repair",
          status: "Inactive",
          date: "Jan 10, 2024",
        },
          {
          service: "Preventive Maintenance",
          description: "Scheduled maintenance and inspection services",
          category: "Maintenance",
          status: "Active",
          date: "Jan 10, 2024",
        },
        {
          service: "HVAC Repair",
          description: "Diagnostic and repair services for HVAC systems",
          category: "Repair",
          status: "Inactive",
          date: "Jan 10, 2024",
        },
      ];

      $(document).ready(function () {
        servicesTable = initDataTable("#servicesTable", SERVICES, [
          { data: "service" },
          { data: "description" },
          {
            data: "category" },
          {
            data: "status",
            render: (d) => renderStatusBadge(d),
          },
          { data: "date" },
          {
        data: null,
        render: (d) => `
         <button class="btn btn-sm edit-btn">
          <i class="fa-solid fa-pen"></i>
        </button>`,
            },
        ]);

    /* EDIT ROW */
    $('#servicesTable').on('click', '.edit-btn', function () {

    const btn = $(this);
    const tr = btn.closest('tr');
    const row = servicesTable.row(tr);
    const data = row.data();

    /* SAVE MODE */
    if (tr.hasClass("editing")) {

    const inputs = tr.find("input,select");

    data.service = inputs.eq(0).val();
    data.description = inputs.eq(1).val();
    data.category = inputs.eq(2).val();
    data.status = inputs.eq(3).val();

    row.data(data).draw(false);
    tr.removeClass("editing");

    btn.html('<i class="fa-regular fa-pen-to-square"></i>');
    return;
  }

    /* EDIT MODE */
    tr.addClass("editing");

    tr.find("td").eq(0).html(`
    <input class="form-control form-control-sm" value="${data.service}">`);

    tr.find("td").eq(1).html(`
    <input class="form-control form-control-sm" value="${data.description}">`);

    tr.find("td").eq(2).html(`
    <input class="form-control form-control-sm" value="${data.category}">`);

    tr.find("td").eq(3).html(`
    <select class="form-select form-select-sm">
      <option ${data.status=="Active"?"selected":""}>Active</option>
      <option ${data.status=="In Active"?"selected":""}>In Active</option>
    </select>`);

    btn.html('<i class="fa-solid fa-check"></i>');
    });

        /* Search */
        $("#customSearch").on("keyup", function () {
          servicesTable.search(this.value).draw();
        });

       /* Status Filter */
      $("#statusFilter").on("change", function () {
      const val = this.value;

    servicesTable
    .column(3)
    .search(val ? "^" + val + "$" : "", true, false)
    .draw();
     });

      // Add Service Modal Logic
      document.getElementById("createServiceBtn").addEventListener("click", function () {
      const serviceName = document.getElementById("serviceName");
      const description = document.getElementById("description");
      const category = document.getElementById("category");
      const status = document.getElementById("status");

      let valid = true;

  // clear previous errors
    document.querySelectorAll(".error-msg").forEach(e => e.remove());
    document.querySelectorAll(".is-invalid").forEach(e => e.classList.remove("is-invalid"));

    function showError(input, message) {
    input.classList.add("is-invalid");
    const err = document.createElement("div");
    err.className = "error-msg text-danger small mt-1";
    err.innerText = message;
    input.parentNode.appendChild(err);
    valid = false;
  }

  // validations
  if (!serviceName.value.trim())
    showError(serviceName, "Service Name required");

  // Add to table if valid
  if (valid) {
  const newService = {
    service: serviceName.value.trim(),
    description: description.value.trim(),
    category: category.value.trim(),
    status: "Active",
    date: "Jan 10, 2024",
    };

  // add row to table
    servicesTable.row.add(newService).draw();

  // close modal
    const modal = bootstrap.Modal.getInstance(document.getElementById("addServiceModal"));
    modal.hide();

  // reset form
    [serviceName,description,category].forEach(i => i.value = "");
    role.selectedIndex = 0;
    }
    });
    });
    </script>
    </body>
    </html>
