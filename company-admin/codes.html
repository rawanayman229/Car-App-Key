    <!doctype html>
    <html lang="en">
    <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Code Requests</title>

    <!-- CSS Links-->
    <link rel="stylesheet" href="../assets/css/bootstrap.min.css" />
    <link rel="stylesheet" href="../assets/css/all.min.css" />
    <link rel="stylesheet" href="styles.css" />
    <link
      rel="stylesheet"
      href="https://cdn.datatables.net/1.13.6/css/dataTables.bootstrap5.min.css"/>
  </head>

  <body>
    <!-- Start Of Static Section (Side Bar) -->

    <!-- Sidebar Toggle Overlay (Mobile and Tablet) -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>

      <!-- ===== Sidebar (Desktop) ===== -->
    <aside class="sidebar d-flex flex-column" id="sidebar">
      <!-- 1. Header Section -->
      <div class="sidebar-header">
        <!-- Logo Text -->
        <div class="logo">
          <h4>SecureAccess Pro</h4>
          <p>Company Admin</p>
        </div>

        <!-- Close button (Mobile) -->
        <button class="btn d-md-none text-muted" id="closeSidebar">
          <i class="fas fa-times"></i>
        </button>
      </div>

      <!-- 2. Navigation Menu -->
      <ul class="menu flex-grow-1">
        <li data-page="dashboard" class="active">
          <a href="dashboard.html">
            <i class="fa-solid fa-table-cells-large"></i>
            Dashboard
          </a>
        </li>

        <li data-page="jobs">
          <a href="jobs.html">
            <i class="fa-solid fa-suitcase"></i>
            Jobs
          </a>
        </li>

        <li data-page="codes">
          <a href="codes.html">
            <i class="fa-solid fa-key"></i></i>
            Code Request
          </a>
        </li> 

        <li data-page="technicians">
          <a href="technicians.html">
            <i class="fa-solid fa-user-group"></i>
            Technicians
          </a>
        </li>

        <li data-page="financials">
          <a href="financials.html">
            <i class="fa-solid fa-dollar-sign"></i>
            Financials
          </a>
        </li>

        <li data-page="reports">
          <a href="reports.html">
            <i class="fa-regular fa-file-lines"></i>
            Reports
          </a>
        </li>

        <li data-page="company-area">
          <a href="company-area.html">
            <i class="fa-solid fa-building"></i>
            Company Area
          </a>
        </li>
        
        <li data-page="settings">
          <a href="settings.html">
            <i class="fa-solid fa-gear"></i>
            Settings
          </a>
        </li>
      </ul>
      <!-- 3. Sidebar Footer (User Profile) -->
      <div class="sidebar-footer">
        <div class="d-flex align-items-center gap-3">
          <!-- Avatar Circle -->
          <div class="user-avatar" id="userAvatar">AU</div>

          <!-- Text Info -->
          <div class="user-info">
            <h6 id="sidebarUsername">Admin User</h6>
            <small id="sidebarEmail">Elite Locksmith Co.</small>
          </div>
        </div>
      </div>
    </aside>
    <!-- End OF Sidebar -->

    <!-- ===== Main Wrapper (Content) ===== -->
    <main class="main-wrapper" id="mainWrapper">
      <!-- Mobile Header (Visible only on mobile/tablet to toggle sidebar) -->
      <div
        class="d-lg-none p-3 bg-white border-bottom d-flex align-items-center justify-content-between sticky-top">
        <h5 class="m-0 fw-bold text-dark">SecureAccess Pro</h5>
        <button class="btn btn-light" id="toggleSidebar">
          <i class="fas fa-bars"></i>
        </button>
      </div>

      <!-- Main Content Area -->
      <!-- Header -->
      <div class="d-flex flex-column justify-content-left">
        <h3 class="page-title">Code Requests</h3>
        <p class="page-subtitle">Manage code requests from technicians for service jobs.</p>
      </div>

      <div class="row content gap-3 align-items-center mb-3">
        <!-- ===== Search + Filter Section ===== -->
        <!-- Search -->
        <div class="col-lg-8">
          <div class="search-box">
            <i class="fas fa-search"></i>
            <input type="text" id="customSearch" placeholder="Search by customer, job ID, or technician..." />
          </div>
        </div>

        <!-- Status -->
        <div class="filter col-lg-3">
          <i class="fa-solid fa-filter"></i>
          <select id="statusFilter">
            <option value="">All Statuses</option>
            <option>Sent to Technician</option>
            <option>Pending</option>
            <option>Approved</option>
            <option>Rejected</option>
          </select>
        </div>
        </div>

   <!-- Table -->
      <div class="card-box">
      <h5 class="fw-bold mb-3">All Code Requests</h5>
      <p class="text-muted">7 requests found</p>
      <div  class="table-responsive mt-3">
        <table id="codesTable" class="table w-100">
          <thead>
            <tr>
              <th>Code</th>
              <th>Customer</th>
              <th>Item / Asset</th>
              <th>Paid By</th>
              <th>Requested By</th>
              <th>Job ID</th>
              <th>Status</th>
              <th>Created</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
      </div>
    </main>
    <!-- End of Main Wrapper -->

    <!-- JS Files -->
    <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.6/js/dataTables.bootstrap5.min.js"></script>
    <script src="../assets/js/bootstrap.bundle.min.js"></script>
    <script src="script.js"></script>

    <!-- Internal Script -->
    <script>

      // Inintal Table
      let codesTable;
      const CODES = [
        {
          code: "8472-AB",
          customer: "John Smith",
          item: "Toyota Camry 2020",
          paidBy: "Company",
          requestBy: "Mike Johnson",
          jobId: "JOB-2024-001234",
          status: "Sent to Technician",
          date : "Feb 20, 2024, 09:30 AM",
        },
        {
          code: "8472-AB",
          customer: "Sarah Johnson",
          item: "Honda Accord 2019",
          paidBy: "Technician",
          requestBy: "David Lee",
          jobId: "JOB-2024-001235",
          status: "Pending",
          date : "Feb 21, 2024, 10:15 AM",
        },
          {
          code: "8472-AB",
          customer: "Sarah Johnson",
          item: "Honda Accord 2019",
          paidBy: "Company",
          requestBy: "Mike Johnson",
          jobId: "JOB-2024-001234",
          status: "Approved",
          date : "Feb 20, 2024, 09:30 AM",
        },
          {
          code: "8472-AB",
          customer: "James Wilson",
          item: "Toyota Camry 2020",
          paidBy: "Company",
          requestBy: "Mike Johnson",
          jobId: "JOB-2024-001234",
          status: "Rejected",
          date : "Feb 20, 2024, 09:30 AM",
        },
          {
          code: "8472-AB",
          customer: "John Smith",
          item: "Toyota Camry 2020",
          paidBy: "Company",
          requestBy: "Mike Johnson",
          jobId: "JOB-2024-001234",
          status: "Sent to Technician",
          date : "Feb 20, 2024, 09:30 AM",
        },
          {
          code: "8472-AB",
          customer: "John Smith",
          item: "Toyota Camry 2020",
          paidBy: "Company",
          requestBy: "Mike Johnson",
          jobId: "JOB-2024-001234",
          status: "Sent to Technician",
          date : "Feb 20, 2024, 09:30 AM",
        },
          {
          code: "8472-AB",
          customer: "John Smith",
          item: "Toyota Camry 2020",
          paidBy: "Company",
          requestBy: "Mike Johnson",
          jobId: "JOB-2024-001234",
          status: "Sent to Technician",
          date : "Feb 20, 2024, 09:30 AM",
        },
      ];

      $(document).ready(function () {
        codesTable = initDataTable("#codesTable", CODES, [
          { data: "code" },
          { data: "customer" },
          {
            data: "item" },
          { data: "paidBy" },
          { data: "requestBy" },
          { data: "jobId" },
          {
            data: "status",
            render: (d) => renderStatusBadge(d),
          },
          { data: "date" },
          {
        data: null,
        render: (d) => `
         <a href="codesDetails.html?id=${d.jobId}" class="action-link">
         <i class="fa fa-eye"></i> View
         </a>`,
            },
        ]);

        /* Search */
        $("#customSearch").on("keyup", function () {
          codesTable.search(this.value).draw();
        });

       /* Status Filter */
      $("#statusFilter").on("change", function () {
       const val = this.value;

     if (val) {
    codesTable.column(6).search(val).draw();  
     } else {
    codesTable.column(6).search("").draw();
     }
     });
    });
    </script>
    </body>
    </html>
