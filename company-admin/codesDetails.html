    <!doctype html>
    <html lang="en">
    <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Code Request Details</title>

    <link rel="stylesheet" href="../assets/css/bootstrap.min.css" />
    <link rel="stylesheet" href="../assets/css/all.min.css" />
    <link rel="stylesheet" href="styles.css" />
    </head>

   <body>
    <div class="details-wrapper">
      <!-- Header -->
      <div class="details-header">
        <div>
          <div class="page-title">Code Request Details</div>
          <div class="page-subtitle" id="requestId">Request ID: -</div>
        </div>
        <button class="close-btn" onclick="history.back()">
          <i class="fa-solid fa-xmark"></i>
        </button>
      </div>

      <!-- Request Information -->
      <div class="section-title">Request Information</div>
      <div class="info-card">
        <div class="mb-3">
          <div class="label">Status</div>
          <span id="statusBadge" class="badge-soft"></span>
        </div>

        <div class="mb-3">
          <div class="label">Customer Name</div>
          <div class="value" id="customerName"></div>
        </div>

        <div class="row">
          <div class="col-md-6 mb-3">
            <div class="label">Job ID</div>
            <div class="value" id="jobId"></div>
          </div>
          <div class="col-md-6 mb-3">
            <div class="label">Requested By</div>
            <div class="value" id="requestedBy"></div>
          </div>
        </div>

        <div class="mb-3">
          <div class="label">Paid By</div>
          <span class="paid-badge" id="paidBy"></span>
        </div>

        <div>
          <div class="label">Created At</div>
          <div class="value" id="createdAt"></div>
        </div>
      </div>

      <!-- Item / Asset Details -->
      <div class="section-title">
        <i class="fa-solid fa-car-side me-2"></i> Item / Asset Details
      </div>
     <div class="info-card">
    <div class="mb-2">
    <div class="label">Item Type</div>
    <div class="value" id="itemType"></div>
    </div>

    <div class="mb-2">
    <div class="label">Vehicle</div>
    <div class="value" id="vehicle"></div>
    </div>

    <div class="mb-2">
    <div class="label">Plate Number</div>
    <div class="value" id="plate"></div>
    </div>

    <div>
    <div class="label">VIN</div>
    <div class="value" id="vin"></div>
    </div>
    </div>

    <!-- Send Code Section -->
    <div id="sendCodeSection" style="display:none">

    <div class="section-title">

    <div class="info-card">
    <div class="mb-3">
      <div class="label">Code Value *</div>
      <input id="codeInput" class="form-control" placeholder="e.g., 8472-AB">
    </div>

    <div class="mb-3 text-muted small" id="sendText">
      This code will be sent to technician
    </div>

    <div class="d-flex gap-2">
      <button class="secondary-btn w-50" onclick="toggleSendCard()">
        Cancel
      </button>

      <button class="primary-btn w-50" onclick="sendCode()">
        <i class="fa-regular fa-paper-plane"></i>
        Send Code
      </button>
    </div>

    </div>
    </div>

      </div>

      <!-- Actions -->
       <div class="buttons">
      <button id="sendBtn" class="primary-btn mb-3" onclick="toggleSendCard()">
      <i class="fa-solid fa-paper-plane"></i>
       Add / Send Code to Technician
       </button>

      <button class="secondary-btn" onclick="history.back()">Close</button>
    </div>
    </div>


    <script src="script.js"></script>
    
    <script>
      const CODES = [
        {
          code: "8472-AB",
          customer: "John Smith",
          item: "Toyota Camry 2020",
          paidBy: "Company",
          requestBy: "Mike Johnson",
          jobId: "JOB-2024-001234",
          status: "Sent to Technician",
          date: "Feb 20, 2024, 09:30 AM",
        },
        {
          code: "8472-AB",
          customer: "Sarah Johnson",
          item: "Honda Accord 2019",
          paidBy: "Technician",
          requestBy: "David Lee",
          jobId: "JOB-2024-001235",
          status: "Pending",
          date: "Feb 21, 2024, 10:15 AM",
        },
      ];

      /* URL param */
      const params = new URLSearchParams(window.location.search);
      const jobIdParam = params.get("id");

      /* Find record */
      const data = CODES.find((c) => c.jobId === jobIdParam);

      if (!data) {
        alert("Code request not found");
      } else {
        document.getElementById("requestId").innerText =
          `Request ID: ${data.code}`;

        document.getElementById("customerName").innerText = data.customer;
        document.getElementById("jobId").innerText = data.jobId;
        document.getElementById("requestedBy").innerText = data.requestBy;
        document.getElementById("paidBy").innerText = data.paidBy;
        document.getElementById("createdAt").innerText = data.date;
        document.getElementById("itemType").innerText = "Vehicle";
        document.getElementById("vehicle").innerText = data.item;
        document.getElementById("plate").innerText = "ABC-123";
        document.getElementById("vin").innerText = "1HGCM82633A123456";

        const badge = document.getElementById("statusBadge");
        badge.innerText = data.status;

        if (data.status === "Pending") badge.classList.add("status-pending");
        if (data.status === "Approved") badge.classList.add("status-approved");
        if (data.status === "Rejected") badge.classList.add("status-rejected");
        if (data.status === "Sent to Technician")
          badge.classList.add("status-sent");
      }

    // Preview for send code button
    function toggleSendCard(){
    const card = document.getElementById("sendCodeSection");
    const btn  = document.getElementById("sendBtn");

    const isHidden = card.style.display === "none" || card.style.display === "";

    if(isHidden){
     card.style.display = "block";
     btn.style.display = "none";

     document.getElementById("sendText").innerText =
       "This code will be sent to " + data.requestBy;

     window.scrollTo({
       top: document.body.scrollHeight,
       behavior: "smooth"
     });

    } else {
     card.style.display = "none";
     btn.style.display = "block";
  }
   }
   function sendCode(){

    const val = document.getElementById("codeInput").value.trim();

   if(!val){
    alert("Enter code first");
    return;
   }

   alert("Code " + val + " sent successfully!");

    document.getElementById("codeInput").value = "";

    toggleSendCard();  
   }
    </script>
    </body>
    </html>
