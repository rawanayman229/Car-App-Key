   <!doctype html>
   <html lang="en">
   <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Financials</title>

    <!-- CSS Links-->
    <link rel="stylesheet" href="../assets/css/bootstrap.min.css" />
    <link rel="stylesheet" href="../assets/css/apexcharts.css" />
    <link rel="stylesheet" href="../assets/css/all.min.css" />
    <link rel="stylesheet" href="styles.css" />
    <link
      rel="stylesheet"
      href="https://cdn.datatables.net/1.13.6/css/dataTables.bootstrap5.min.css"/>
  </head>
  <body>
    <!-- Start Of Static Section (Side Bar) -->

    <!-- Sidebar Toggle Overlay (Mobile and Tablet) -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>

    <!-- ===== Sidebar (Desktop) ===== -->
    <aside class="sidebar d-flex flex-column" id="sidebar">
      <!-- 1. Header Section -->
      <div class="sidebar-header">
        <!-- Logo Text -->
        <div class="logo">
          <h4>SecureAccess Pro</h4>
          <p>Company Admin</p>
        </div>

        <!-- Close button (Mobile) -->
        <button class="btn d-md-none text-muted" id="closeSidebar">
          <i class="fas fa-times"></i>
        </button>
      </div>

      <!-- 2. Navigation Menu -->
      <ul class="menu flex-grow-1">
        <li data-page="dashboard" class="active">
          <a href="dashboard.html">
            <i class="fa-solid fa-table-cells-large"></i>
            Dashboard
          </a>
        </li>

        <li data-page="jobs">
          <a href="jobs.html">
            <i class="fa-solid fa-suitcase"></i>
            Jobs
          </a>
        </li>

        <li data-page="codes">
          <a href="codes.html">
            <i class="fa-solid fa-key"></i></i>
            Code Request
          </a>
        </li> 

        <li data-page="technicians">
          <a href="technicians.html">
            <i class="fa-solid fa-user-group"></i>
            Technicians
          </a>
        </li>

        <li data-page="financials">
          <a href="financials.html">
            <i class="fa-solid fa-dollar-sign"></i>
            Financials
          </a>
        </li>

        <li data-page="reports">
          <a href="reports.html">
            <i class="fa-regular fa-file-lines"></i>
            Reports
          </a>
        </li>

        <li data-page="company-area">
          <a href="company-area.html">
            <i class="fa-solid fa-building"></i>
            Company Area
          </a>
        </li>
        
        <li data-page="settings">
          <a href="settings.html">
            <i class="fa-solid fa-gear"></i>
            Settings
          </a>
        </li>
      </ul>
      <!-- 3. Sidebar Footer (User Profile) -->
      <div class="sidebar-footer">
        <div class="d-flex align-items-center gap-3">
          <!-- Avatar Circle -->
          <div class="user-avatar" id="userAvatar">AU</div>

          <!-- Text Info -->
          <div class="user-info">
            <h6 id="sidebarUsername">Admin User</h6>
            <small id="sidebarEmail">Elite Locksmith Co.</small>
          </div>
        </div>
      </div>
    </aside>
    <!-- End OF Sidebar -->

    <!-- ===== Main Wrapper (Content) ===== -->
    <main class="main-wrapper" id="mainWrapper">
      <!-- Mobile Header (Visible only on mobile/tablet to toggle sidebar) -->
      <div
        class="d-lg-none p-3 bg-white border-bottom d-flex align-items-center justify-content-between sticky-top">
        <h5 class="m-0 fw-bold text-dark">SecureAccess Pro</h5>
        <button class="btn btn-light" id="toggleSidebar">
          <i class="fas fa-bars"></i>
        </button>
      </div>

      <!-- Main Content Area -->
      <!-- Header -->
      <div class="d-flex flex-column justify-content-left">
        <h3 class="page-title">Financials</h3>
        <p class="page-subtitle">
         Track payments and financial performance.
        </p>
      </div>

      <!-- Status Cards -->
      <div class="row g-4 mb-4">
        <!-- Card 1 -->
        <div class="col-12 col-sm-6 col-md-4 col-xl">
          <div class="stat-card">
            <div class="info">
            <p class="icon-box"><i class="fa-solid fa-dollar-sign green"></i></p>
            <span class="green-text"><i class="fa-solid fa-arrow-trend-up"></i></span>
            </div>
            <p>Total Collected</p>
            <h3>$1,030</h3>

            <span class="green-text">+18.2% from last month</span>
          </div>
        </div>

        <!-- Card 2 -->
       <div class="col-12 col-sm-6 col-md-4 col-xl">
          <div class="stat-card">
            <div class="info">
            <p class="icon-box"><i class="fa-regular fa-clock orange"></i></p>
            <span class="orange-text"><i class="fa-solid fa-arrow-trend-down"></i></span>
            </div>
            <p>Pending Payments</p>
            <h3>$810.5</h3>
            <span class="orange-text">-5.4% from last month</span>
          </div>
        </div>

        <!-- Card 3 -->
         <div class="col-12 col-sm-6 col-md-4 col-xl">
          <div class="stat-card">
            <div class="info">
            <p class="icon-box"><i class="fa-regular fa-circle-check blue"></i></p>
            <span class="blue-text"><i class="fa-solid fa-dollar-sign"></i></span>
            </div>
            <p>Key Costs (Total)</p>
            <h3>$40</h3>
            <span class="light-text">Codes & Physical Keys</span>
          </div>
        </div>

      </div>
      <!-- End Of Status Cards -->

      <!-- Charts Row -->
      <div class="row g-3 mb-4">
        <!-- Monthly Revenue Trend -->
        <div class="col-lg-12">
          <div class="card-box">
            <h6>Monthly Revenue Trend</h6>
            <div id="revenueTrendChart"></div>
          </div>
        </div>
      </div>
      <!-- End Of Charts Row -->

      <!--Recent Transactions table -->
      <div class="card-box">
      <h5 class="fw-bold mb-3">Recent Transactions</h5>
      <div  class="table-responsive mt-3">
        <table id="transactionsTable" class="table w-100">
          <thead>
            <tr>
              <th>Transaction ID</th>
              <th>Job ID</th>
              <th>Type</th>
              <th>Date</th>
              <th>Amount</th>
              <th>Status</th>
              <th>Payment Method</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
      </div>
      <!-- End of Recent Transactions table-->
    </main>
    <!-- End of Main Wrapper -->

    <!-- JS Files -->
    <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.6/js/dataTables.bootstrap5.min.js"></script>
    <script src="../assets/js/bootstrap.bundle.min.js"></script>
    <script src="../assets/js/apexcharts.min.js"></script>
    <script src="script.js"></script>

    <!-- Internal Script to Render Charts -->
    <script>
      /*  CHARTS */    
      /* ===== Revenue Trend (Line Chart) ===== */
      const revenueTrendEl = document.querySelector("#revenueTrendChart");

      if (revenueTrendEl && typeof ApexCharts !== "undefined") {
        new ApexCharts(revenueTrendEl, {
          series: [
            {
              name: "Revenue",
              data: [14000, 15000, 12000, 14000, 17000, 20000],
            },
          ],
          chart: {
            type: "line",
            height: 320,
            toolbar: { show: false },
            fontFamily: "inherit",
          },
          stroke: {
            curve: "smooth",
            width: 4,
          },
          markers: {
            size: 6,
            colors: ["#ffffff"],
            strokeColors: "#10B981",
            strokeWidth: 3,
            hover: { size: 8 },
          },
          colors: ["#10B981"],
          xaxis: {
            categories: ["Jan", "Feb", "Mar", "Apr", "May", "Jun"],
            axisBorder: { show: false },
            axisTicks: { show: false },
            labels: {
              style: {
                colors: "#9CA3AF",
                fontSize: "13px",
              },
            },
          },
          yaxis: {
            min: 0,
            max: 20000,
            tickAmount: 4,
            labels: {
              formatter: (val) => Math.round(val),
              style: {
                colors: "#9CA3AF",
                fontSize: "13px",
              },
            },
          },
          grid: {
            borderColor: "#E5E7EB",
            strokeDashArray: 4,
          },
          tooltip: {
            y: {
              formatter: (val) => `$${val.toLocaleString()}`,
            },
          },
        }).render();
      }

      // Inintal Table
      let transactionsTable;
      const TRANSACTIONS = [
        {
          transId: "TXN-5001",
          jobId: "JOB-1003",
          type: "Service Fee",
          date: "2026-02-12",
          amount: "$45.00",
          status: "collected",
          payMethod : "Credit Card",
        },
        {
          transId: "TXN-5001",
          jobId: "JOB-1003",
          type: "Service Fee",
          date: "2026-02-12",
          amount: "$45.00",
          status: "collected",
          payMethod : "Credit Card",
        },
        {
          transId: "TXN-5001",
          jobId: "JOB-1003",
          type: "Service Fee",
          date: "2026-02-12",
          amount: "$45.00",
          status: "pending",
          payMethod : "Cash",
        },
        {
          transId: "TXN-5001",
          jobId: "JOB-1003",
          type: "Service Fee",
          date: "2026-02-12",
          amount: "$45.00",
          status: "pending",
          payMethod : "Cash",
        },
        {
          transId: "TXN-5001",
          jobId: "JOB-1003",
          type: "Service Fee",
          date: "2026-02-12",
          amount: "$45.00",
          status: "collected",
          payMethod : "Invoice",
        },
        {
          transId: "TXN-5001",
          jobId: "JOB-1003",
          type: "Service Fee",
          date: "2026-02-12",
          amount: "$45.00",
          status: "collected",
          payMethod : "Company Check",
        },
        {
          transId: "TXN-5001",
          jobId: "JOB-1003",
          type: "Service Fee",
          date: "2026-02-12",
          amount: "$45.00",
          status: "collected",
          payMethod : "Company Check",
        },
      ];

      $(document).ready(function () {
        transactionsTable = initDataTable("#transactionsTable", TRANSACTIONS, [
          { data: "transId" },
          { data: "jobId" },
          {
            data: "type" },
          { data: "date" },
          { data: "amount" },
          {
            data: "status",
            render: (d) => renderStatusBadge(d),
          },
          { data: "payMethod" },
        ]);
      });
    </script>
  </body>
</html>
