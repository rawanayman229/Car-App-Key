<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin Dashboard</title>

    <!-- CSS Links-->
    <link rel="stylesheet" href="../assets/css/bootstrap.min.css" />
    <link rel="stylesheet" href="../assets/css/apexcharts.css" />
    <link rel="stylesheet" href="../assets/css/all.min.css" />
    <link rel="stylesheet" href="../assets/css/styles.css" />
    <link
      rel="stylesheet"
      href="https://cdn.datatables.net/1.13.6/css/dataTables.bootstrap5.min.css"/>
  </head>

  <!-- Internal Styles -->
  <style>
     /* Active Jobs Table */
    #activeJobsTable thead th {
      color: #6b7280;
      font-weight: 500;
      border-bottom: 1px solid #e5e7eb !important;
    }

    #activeJobsTable tbody td {
      border-bottom: 1px solid #f1f5f9;
      color: #374151;
      vertical-align: middle;
    }

    /* Status Pills */
    .badge-status {
      padding: 6px 14px;
      border-radius: 999px;
      font-size: 14px;
      font-weight: 400;
      display: inline-block;
    }
    .status-progress { background: #DBEAFE; color: #1447E6; }
    .status-assigned { background: #F3F4F6; color: #364153; }

    /* Priority Pills */
    .priority-high { background: #FFE2E2; color: #C10007; }
    .priority-medium { background: #FEF9C2; color: #A65F00; }
    .priority-low { background: #DCFCE7; color: #008236; }

    /* RECENT ALERTS STYLING*/
    .alert-item {
        display: flex;
        align-items: flex-start;
        padding: 16px;
        background-color: #F9FAFB;
        border-radius: 12px;
        margin-bottom: 16px;
    }

    .alert-item:last-child {
        margin-bottom: 0;
    }

    .alert-icon-wrapper {
        width: 48px;
        height: 48px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 20px;
        flex-shrink: 0;
        margin-right: 16px;
    }

    /* Alert Colors */
    .alert-red { background-color: #FFE2E2; color: #E7000B; }
    .alert-yellow { background-color: #FEF9C2; color: #D08700; }
    .alert-blue { background-color: #DBEAFE; color: #155DFC; }

    /* Text */
    .alert-text p {
        margin: 0;
        font-weight: 500;
        color: #101828;
        font-size: 15px;
        line-height: 1.4;
    }

    .alert-text span {
        display: block;
        margin-top: 4px;
        font-size: 13px;
        color: #6A7282;
    }
  </style>
  <!--End Of Internal Styles -->

  <body>
    <!-- Start Of Static Section (Side Bar) -->

    <!-- Sidebar Toggle Overlay (Mobile and Tablet) -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>

    <!-- ===== Sidebar (Desktop) ===== -->
    <aside class="sidebar d-flex flex-column" id="sidebar">
      <!-- 1. Header Section -->
      <div class="sidebar-header">
        <!-- Logo Text -->
        <div class="logo">
          <h4>LockAccess Pro</h4>
          <p>Platform Admin</p>
        </div>

        <!-- Close button (Mobile) -->
        <button class="btn d-md-none text-muted" id="closeSidebar">
          <i class="fas fa-times"></i>
        </button>
      </div>

      <!-- 2. Navigation Menu -->
      <ul class="menu flex-grow-1">
        <li data-page="dashboard" class="active">
          <a href="dashboard.html">
            <i class="fa-solid fa-table-cells-large"></i>
            Dashboard
          </a>
        </li>

        <li data-page="companies">
          <a href="companies.html">
            <i class="fa-regular fa-building"></i>
            Companies
          </a>
        </li>

        <li data-page="reports">
          <a href="reports.html">
            <i class="fa-regular fa-file-lines"></i>
            Reports
          </a>
        </li>

        <li data-page="jobs">
          <a href="jobs.html">
            <i class="fa-solid fa-user-group"></i>
            Jobs
          </a>
        </li>

        <li data-page="notifications">
          <a href="notifications.html">
            <i class="fa-regular fa-bell"></i>
            Notifications
          </a>
        </li>

        <li data-page="customers">
          <a href="customers.html">
            <i class="fa-solid fa-user-group"></i>
            Customer
          </a>
        </li>

        <li data-page="users">
          <a href="users.html">
            <i class="fa-solid fa-user-group"></i>
            Users
          </a>
        </li>

          <li data-page="calls">
          <a href="calls.html">
          <i class="fa-solid fa-mobile-screen"></i> Call Logs
          </a>
        </li>
      </ul>
      <!-- 3. Sidebar Footer (User Profile) -->
      <div class="sidebar-footer">
        <div class="d-flex align-items-center gap-3">
          <!-- Avatar Circle -->
          <div class="user-avatar" id="userAvatar">U</div>

          <!-- Text Info -->
          <div class="user-info">
            <h6 id="sidebarUsername">User</h6>
            <small id="sidebarEmail">user@email.com</small>
          </div>
        </div>
      </div>
    </aside>
    <!-- End OF Sidebar -->

    <!-- ===== Main Wrapper (Content) ===== -->
    <div class="main-wrapper" id="mainWrapper">
      <!-- Mobile Header (Visible only on mobile/tablet to toggle sidebar) -->
      <div class="d-lg-none p-3 bg-white border-bottom d-flex align-items-center justify-content-between sticky-top">
        <h5 class="m-0 fw-bold text-dark">LockAccess Pro</h5>
        <button class="btn btn-light" id="toggleSidebar">
          <i class="fas fa-bars"></i>
        </button>
      </div>

      <!-- Main Content Area -->
      <main>
        <!-- Header -->
        <div class="d-flex flex-column justify-content-left">
          <h3 class="page-title">Dashboard Overview</h3>
          <p class="page-subtitle">
            Welcome back! Here's what's happening today.
          </p>
        </div>

        <!-- Status Cards -->
        <div class="row g-4 mb-4">
          <div class="col-12 col-sm-6 col-md-4 col-xl">
            <div class="stat-card">
              <div class="info">
                <p class="icon-box"><i class="fa-solid fa-user-group"></i></p>
                <h3>18</h3>
                <span>Number of companies</span>
              </div>
              <p>+3</p>
            </div>
          </div>

          <div class="col-12 col-sm-6 col-md-4 col-xl">
            <div class="stat-card">
              <div class="info">
                <p class="icon-box"><i class="fa-solid fa-user-group"></i></p>
                <h3>18</h3>
                <span>Number of companies</span>
              </div>
              <p>+3</p>
            </div>
          </div>

          <div class="col-12 col-sm-6 col-md-4 col-xl">
            <div class="stat-card">
              <div class="info">
                <p class="icon-box"><i class="fa-solid fa-user-group"></i></p>
                <h3>18</h3>
                <span>Number of companies</span>
              </div>
              <p>+3</p>
            </div>
          </div>

          <div class="col-12 col-sm-6 col-md-4 col-xl">
            <div class="stat-card">
              <div class="info">
                <p class="icon-box"><i class="fa-solid fa-user-group"></i></p>
                <h3>18</h3>
                <span>Number of companies</span>
              </div>
              <p>+3</p>
            </div>
          </div>

          <div class="col-12 col-sm-6 col-md-4 col-xl">
            <div class="stat-card">
              <div class="info">
                <p class="icon-box"><i class="fa-solid fa-user-group"></i></p>
                <h3>18</h3>
                <span>Number of companies</span>
              </div>
              <p>+3</p>
            </div>
          </div>
        </div>
        <!-- End Of Status Cards -->

        <!-- Charts Row -->
        <div class="row g-3 mb-4">
          <!-- Jobs This Week -->
          <div class="col-lg-6">
            <div class="card-box">
              <h6>Jobs This Week</h6>
              <div id="jobsWeekChart"></div>
            </div>
          </div>

          <!-- Revenue Trend -->
          <div class="col-lg-6">
            <div class="card-box">
              <h6>Revenue Trend</h6>
              <div id="revenueTrendChart"></div>
            </div>
          </div>
        </div>
        <!-- End Of Charts Row -->

        <!--Recent Activity Row -->
        <div class="row g-2">
          <!-- Active Jobs -->
          <div class="col-lg-8">
          <div class="card-box">
          <h6>Active Jobs</h6>
          <div class="table-responsive">
          <table id="activeJobsTable" class="table w-100">
          <thead>
          <tr>
          <th>Job ID</th>
          <th>Company</th>
          <th>Type</th>
          <th>Technician</th>
          <th>Status</th>
          <th>Priority</th>
        </tr>
        </thead>
      <tbody></tbody>
      </table>
      </div>
          </div>
          </div>

          <!-- Recent Alerts -->
          <div class="col-lg-4">
            <div class="card-box">
              <h6>Recent Alerts</h6>
              <!-- Alert 1: Overdue -->
              <div class="alert-item">
                <div class="alert-icon-wrapper alert-red">
                  <i class="fa-regular fa-clock"></i>
                </div>
                <div class="alert-text">
                  <p>Job #1189 is overdue by 2 hours</p>
                  <span>15 min ago</span>
                </div>
              </div>

              <!-- Alert 2: Payment -->
              <div class="alert-item">
                <div class="alert-icon-wrapper alert-yellow">
                  <i class="fa-solid fa-dollar-sign"></i>
                </div>
                <div class="alert-text">
                  <p>SecureAccess Inc has pending payment of $2,450</p>
                  <span>1 hour ago</span>
                </div>
              </div>

              <!-- Alert 3: Unavailable -->
              <div class="alert-item">
                <div class="alert-icon-wrapper alert-blue">
                  <i class="fa-solid fa-user-group"></i>
                </div>
                <div class="alert-text">
                  <p>Technician Mike Davis marked unavailable</p>
                  <span>2 hours ago</span>
                </div>
              </div>

            </div>
          </div>
        </div>
        <!-- End of Recent Activity -->
        
      </main>
      <!-- End of Content -->
    </div>
    <!-- End of Main Wrapper -->

    <!-- JS Files -->
    <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.6/js/dataTables.bootstrap5.min.js"></script>
    <script src="../assets/js/bootstrap.bundle.min.js"></script>
    <script src="../assets/js/apexcharts.min.js"></script>
    <script src="../assets/js/script.js"></script>

    <!-- Internal Script to Render Charts -->
    <script>
      /* DASHBOARD CHARTS */
      /* ===== Jobs This Week (Bar Chart) ===== */
      const jobsWeekEl = document.querySelector("#jobsWeekChart");

      if (jobsWeekEl && typeof ApexCharts !== "undefined") {
        new ApexCharts(jobsWeekEl, {
          series: [
            {
              name: "Jobs",
              data: [12, 18, 15, 22, 28, 17, 9],
            },
          ],
          chart: {
            type: "bar",
            height: 320,
            toolbar: { show: false },
            fontFamily: "inherit",
          },
          plotOptions: {
            bar: {
              borderRadius: 12,
              columnWidth: "55%",
            },
          },
          dataLabels: { enabled: false },
          colors: ["#3B82F6"],
          xaxis: {
            categories: ["Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"],
            axisBorder: { show: false },
            axisTicks: { show: false },
            labels: {
              style: {
                colors: "#9CA3AF",
                fontSize: "13px",
              },
            },
          },
          yaxis: {
          min: 0,
          max: 28,
          tickAmount: 4,
          labels: {
          formatter: (val) => Math.round(val),
          style: {
          colors: "#9CA3AF",
          fontSize: "13px",
          },
            },
          },
          grid: {
            borderColor: "#E5E7EB",
            strokeDashArray: 4,
          },
          tooltip: {
            y: { formatter: (val) => `${val} Jobs` },
          },
        }).render();
      }

      /* ===== Revenue Trend (Line Chart) ===== */
      const revenueTrendEl = document.querySelector("#revenueTrendChart");

      if (revenueTrendEl && typeof ApexCharts !== "undefined") {
        new ApexCharts(revenueTrendEl, {
          series: [
            {
              name: "Revenue",
              data: [40000, 45000, 60000, 66000, 70000],
            },
          ],
          chart: {
            type: "line",
            height: 320,
            toolbar: { show: false },
            fontFamily: "inherit",
          },
          stroke: {
            curve: "smooth",
            width: 4,
          },
          markers: {
            size: 6,
            colors: ["#ffffff"],
            strokeColors: "#10B981",
            strokeWidth: 3,
            hover: { size: 8 },
          },
          colors: ["#10B981"],
          xaxis: {
            categories: ["Jan", "Feb", "Mar", "Apr", "May", "Jun"],
            axisBorder: { show: false },
            axisTicks: { show: false },
            labels: {
              style: {
                colors: "#9CA3AF",
                fontSize: "13px",
              },
            },
          },
          yaxis: {
          min: 0,
          max: 80000,
          tickAmount: 4,
          labels: {
          formatter: (val) => Math.round(val),
          style: {
          colors: "#9CA3AF",
          fontSize: "13px",
          },
            },
          },
          grid: {
            borderColor: "#E5E7EB",
            strokeDashArray: 4,
          },
          tooltip: {
            y: {
              formatter: (val) => `$${val.toLocaleString()}`,
            },
          },
        }).render();
      }

     /* ===== Active Jobs DataTable ===== */
    $(document).ready(function () {
    const ACTIVE_JOBS = [
    {
      id: "JOB-1234",
      company: "QuickLock Services",
      type: "Emergency Lockout",
      tech: "John Smith",
      status: "In Progress",
      priority: "High",
    },
    {
      id: "JOB-1235",
      company: "SecureAccess Inc",
      type: "Lock Installation",
      tech: "Sarah Johnson",
      status: "In Progress",
      priority: "Medium",
    },
    {
      id: "JOB-1236",
      company: "MasterKey Solutions",
      type: "Key Duplication",
      tech: "Mike Davis",
      status: "Assigned",
      priority: "Low",
    },
    {
      id: "JOB-1237",
      company: "QuickLock Services",
      type: "Safe Opening",
      tech: "Emily Brown",
      status: "In Progress",
      priority: "High",
    },
  ];

  $("#activeJobsTable").DataTable({
    data: ACTIVE_JOBS,
    columns: [
      { data: "id" },
      { data: "company" },
      { data: "type" },
      { data: "tech" },
      {
        data: "status",
        render: (d) => {
          const cls = d === "In Progress" ? "status-progress" : "status-assigned";
          return `<span class="badge-status ${cls}">${d}</span>`;
        },
      },
      {
        data: "priority",
        render: (d) => {
          let cls = "";
          if (d === "High") cls = "priority-high";
          else if (d === "Medium") cls = "priority-medium";
          else cls = "priority-low";
          return `<span class="badge-status ${cls}">${d}</span>`;
        },
      },
    ],
    paging: false,
    info: false,
    searching: false,
  });
  });
    </script>
  </body>
</html>
