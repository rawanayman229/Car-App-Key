<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Notifications Management</title>

    <!-- CSS Links-->
    <link rel="stylesheet" href="../assets/css/bootstrap.min.css" />
    <link rel="stylesheet" href="../assets/css/apexcharts.css" />
    <link rel="stylesheet" href="../assets/css/all.min.css" />
    <link rel="stylesheet" href="../assets/css/styles.css" />

  <!-- Internal Style -->
  <style>
    /* ===== Toolbar ===== */
    .notification-toolbar {
      background: #fff;
      border-radius: 12px;
      padding: 16px 24px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
      margin-bottom: 24px;
      flex-wrap: wrap;
      gap: 15px;
    }

    .filter-tabs {
      display: flex;
      gap: 12px;
    }

    .tab-btn {
      padding: 8px 16px;
      border-radius: 8px;
      border: 0.8px solid var(--border-color);
      background: #fff;
      font-weight: 500;
      font-size: 14px;
      color: var(--text-dark);
      cursor: pointer;
      transition: all 0.2s;
    }

    .tab-btn:hover {
      background-color: #f9fafb;
    }

    .tab-btn.active {
      background: var(--primary-color);
      color: #fff;
      border-color: var(--primary-color);
    }

    .toolbar-actions {
      display: flex;
      gap: 24px;
    }

    .action-btn {
      border: none;
      background: transparent;
      font-weight: 500;
      font-size: 14px;
      display: flex;
      align-items: center;
      gap: 8px;
      cursor: pointer;
      transition: opacity 0.2s;
    }

    .action-btn:hover { opacity: 0.8; }
    .action-btn.primary { color: var(--primary-color); }
    .action-btn.danger { color: var(--light-color); }

    /* ===== Notification Card ===== */
    .notifications-list {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .notification-card {
      background: #fff;
      border-radius: 12px;
      padding: 20px 24px;
      display: flex;
      align-items: flex-start;
      gap: 20px;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
      border: 0.8px solid var(--border-color);
      position: relative;
      transition: all 0.3s ease;
    }

    /* Unread State: Blue Border */
    .notification-card.unread {
      border: 1.5px solid var(--primary-color);
    }

    /* Icon Container */
    .icon-box {
      width: 48px;
      height: 48px;
      min-width: 48px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
    }

    .icon-box.blue { background: #EFF6FF; color: var(--primary-color); }
    .icon-box.green { background: #F0FDF4; color: #00A63E; }
    .icon-box.orange { background: #FFFBEB; color: #E17100; }

    .card-content {
      flex: 1;
    }

    .card-title {
      font-weight: 600;
      font-size: 16px;
      color: var(--text-dark);
      margin-bottom: 4px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    /* The Blue Dot for Unread */
    .dot {
      width: 8px;
      height: 8px;
      background: var(--primary-color);
      border-radius: 50%;
      display: none;
    }

    .notification-card.unread .dot {
      display: inline-block;
    }

    .card-desc {
      color: var(--light-color);
      font-size: 14px;
      margin-bottom: 12px;
      line-height: 1.5;
    }

    .card-meta {
      display: flex;
      align-items: center;
      gap: 16px;
      font-size: 13px;
      color: #6B7280;
    }

    .meta-tag {
      background: #fff;
      border: 0.8px solid var(--border-color);
      padding: 4px 10px;
      border-radius: 6px;
      font-weight: 500;
      color: #1F2937;
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 12px;
    }
    
    .meta-tag i { color: #6B7280; }

    /* Actions */
    .card-actions {
      display: flex;
      gap: 16px;
      align-self: center;
    }

    .icon-btn {
      border: none;
      background: transparent;
      font-size: 16px;
      cursor: pointer;
      padding: 4px;
      transition: color 0.2s;
    }

    .btn-mark-read { color: var(--primary-color); }
    .btn-delete { color: #6B7280; }
    .btn-delete:hover { color: #EF4444; }

    /* Animation class for deleting */
    .fade-out {
      opacity: 0;
      transform: translateX(20px);
      pointer-events: none;
    }

    /* Responsive  */
    @media (max-width: 768px) {
        .notification-toolbar { flex-direction: column; align-items: stretch; }
        .notification-card { flex-direction: column; }
        .card-actions { align-self: flex-end; width: 100%; justify-content: flex-end; margin-top: -40px; }
    }
  </style>
  </head>

  <body>
    <!-- Sidebar Toggle Overlay (Mobile and Tablet) -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>

    <!-- ===== Sidebar (Desktop) ===== -->
    <aside class="sidebar d-flex flex-column" id="sidebar">
      <!-- 1. Header Section -->
      <div class="sidebar-header">
        <!-- Logo Text -->
        <div class="logo">
          <h4>LockAccess Pro</h4>
          <p>Platform Admin</p>
        </div>

        <!-- Close button (Mobile) -->
        <button class="btn d-md-none text-muted" id="closeSidebar">
          <i class="fas fa-times"></i>
        </button>
      </div>

      <!-- 2. Navigation Menu -->
      <ul class="menu flex-grow-1">
        <li data-page="dashboard" class="active">
          <a href="dashboard.html">
            <i class="fa-solid fa-table-cells-large"></i>
            Dashboard
          </a>
        </li>

        <li data-page="companies">
          <a href="companies.html">
            <i class="fa-regular fa-building"></i>
            Companies
          </a>
        </li>

        <li data-page="reports">
          <a href="reports.html">
            <i class="fa-regular fa-file-lines"></i>
            Reports
          </a>
        </li>

        <li data-page="jobs">
          <a href="jobs.html">
            <i class="fa-solid fa-user-group"></i>
            Jobs
          </a>
        </li>

        <li data-page="notifications">
          <a href="notifications.html">
            <i class="fa-regular fa-bell"></i>
            Notifications
          </a>
        </li>

        <li data-page="customers">
          <a href="customers.html">
            <i class="fa-solid fa-user-group"></i>
            Customer
          </a>
        </li>

        <li data-page="users">
          <a href="users.html">
            <i class="fa-solid fa-user-group"></i>
            Users
          </a>
        </li>

          <li data-page="calls">
          <a href="calls.html">
          <i class="fa-solid fa-mobile-screen"></i> Call Logs
          </a>
        </li>
      </ul>
      <!-- 3. Sidebar Footer (User Profile) -->
      <div class="sidebar-footer">
        <div class="d-flex align-items-center gap-3">
          <!-- Avatar Circle -->
          <div class="user-avatar" id="userAvatar">U</div>

          <!-- Text Info -->
          <div class="user-info">
            <h6 id="sidebarUsername">User</h6>
            <small id="sidebarEmail">user@email.com</small>
          </div>
        </div>
      </div>
    </aside>
    <!-- End OF Sidebar -->

    <!-- ===== Main Wrapper (Content) ===== -->
    <div class="main-wrapper" id="mainWrapper">
    
    <!-- 1. Mobile Header (Visible only on mobile/tablet) -->
    <div class="d-lg-none p-3 bg-white border-bottom d-flex align-items-center justify-content-between sticky-top">
      <h5 class="m-0 fw-bold text-dark">LockAccess Pro</h5>
      <button class="btn btn-light" id="toggleSidebar">
        <i class="fas fa-bars"></i>
      </button>
    </div>

    <!-- Header -->
    <div class="mb-4">
      <h2 class="fw-bold">Notifications</h2>
      <p class="text-secondary">Monitor and manage all jobs across all companies.</p>
    </div>

    <!-- Controls Bar -->
    <div class="notification-toolbar">
      <div class="filter-tabs">
        <button class="tab-btn active" id="tabAll" onclick="filterNotifications('all')">All (<span id="countAll">0</span>)</button>
        <button class="tab-btn" id="tabUnread" onclick="filterNotifications('unread')">Unread (<span id="countUnread">0</span>)</button>
      </div>

      <div class="toolbar-actions">
        <button class="action-btn primary" onclick="markAllAsRead()">
          <i class="fa-solid fa-check"></i> Mark all as read
        </button>
        <button class="action-btn danger" onclick="deleteRead()">
          <i class="fa-regular fa-trash-can"></i> Delete read
        </button>
      </div>
    </div>

    <!-- Notifications List -->
    <div class="notifications-list" id="notificationList">

      <!-- Card 1: Request (Unread) -->
      <div class="notification-card unread" id="notif-1">
        <div class="icon-box blue">
          <i class="fa-solid fa-info"></i>
        </div>
        <div class="card-content">
          <div class="card-title">
            New Customer Request <span class="dot"></span>
          </div>
          <div class="card-desc">
            Sarah Johnson requested a tow service from Downtown LA
          </div>
          <div class="card-meta">
            <span><i class="fa-regular fa-clock me-1"></i> 2 minutes ago</span>
            <span class="meta-tag"><i class="fa-regular fa-file-lines"></i> request</span>
          </div>
        </div>
        <div class="card-actions">
          <button class="icon-btn btn-mark-read" onclick="markSingleAsRead(this)" title="Mark as read"><i class="fa-solid fa-check"></i></button>
          <button class="icon-btn btn-delete" onclick="deleteSingle(this)" title="Delete"><i class="fa-regular fa-trash-can"></i></button>
        </div>
      </div>

      <!-- Card 2: Job Completed (Unread) -->
      <div class="notification-card unread" id="notif-2">
        <div class="icon-box green">
          <i class="fa-solid fa-check"></i>
        </div>
        <div class="card-content">
          <div class="card-title">
            Job Completed <span class="dot"></span>
          </div>
          <div class="card-desc">
            Quick Tow Services completed job #1247 for John Smith
          </div>
          <div class="card-meta">
            <span><i class="fa-regular fa-clock me-1"></i> 15 minutes ago</span>
            <span class="meta-tag"><i class="fa-solid fa-truck"></i> job</span>
          </div>
        </div>
        <div class="card-actions">
          <button class="icon-btn btn-mark-read" onclick="markSingleAsRead(this)"><i class="fa-solid fa-check"></i></button>
          <button class="icon-btn btn-delete" onclick="deleteSingle(this)"><i class="fa-regular fa-trash-can"></i></button>
        </div>
      </div>

      <!-- Card 3: Pending (Unread) -->
      <div class="notification-card unread" id="notif-3">
        <div class="icon-box orange">
          <i class="fa-solid fa-exclamation"></i>
        </div>
        <div class="card-content">
          <div class="card-title">
            Pending Assignment <span class="dot"></span>
          </div>
          <div class="card-desc">
            Request #1251 has been waiting for assignment for 30 minutes
          </div>
          <div class="card-meta">
            <span><i class="fa-regular fa-clock me-1"></i> 32 minutes ago</span>
            <span class="meta-tag"><i class="fa-regular fa-file-lines"></i> request</span>
          </div>
        </div>
        <div class="card-actions">
          <button class="icon-btn btn-mark-read" onclick="markSingleAsRead(this)"><i class="fa-solid fa-check"></i></button>
          <button class="icon-btn btn-delete" onclick="deleteSingle(this)"><i class="fa-regular fa-trash-can"></i></button>
        </div>
      </div>

      <!-- Card 4: Status Update (Read) -->
      <div class="notification-card" id="notif-4">
        <div class="icon-box blue">
          <i class="fa-solid fa-info"></i>
        </div>
        <div class="card-content">
          <div class="card-title">
            Company Status Update <span class="dot"></span>
          </div>
          <div class="card-desc">
            TechPro Services updated company profile information
          </div>
          <div class="card-meta">
            <span><i class="fa-regular fa-clock me-1"></i> 1 hour ago</span>
            <span class="meta-tag"><i class="fa-regular fa-building"></i> company</span>
          </div>
        </div>
        <div class="card-actions">
          <button class="icon-btn btn-delete" onclick="deleteSingle(this)"><i class="fa-regular fa-trash-can"></i></button>
        </div>
      </div>

    </div>
  </div>

  <!-- JavaScript  -->
    <script src="../assets/js/bootstrap.bundle.min.js"></script>
    <script src="../assets/js/script.js"></script>

    <!-- Internal Logic -->
    <script>
    let currentFilter = 'all';

    // 1. Initialize Counts on Load
    document.addEventListener('DOMContentLoaded', () => {
      updateCounts();
    });

    // 2. Update the Counters in the Tabs
    function updateCounts() {
      const allCards = document.querySelectorAll('.notification-card');
      const unreadCards = document.querySelectorAll('.notification-card.unread');

      document.getElementById('countAll').innerText = allCards.length;
      document.getElementById('countUnread').innerText = unreadCards.length;
    }

    // 3. Mark a single card as read
    function markSingleAsRead(btn) {
      const card = btn.closest('.notification-card');
      
      if(card.classList.contains('unread')) {
        card.classList.remove('unread');
        btn.remove();
        updateCounts();
        
        if(currentFilter === 'unread') {
            card.style.display = 'none';
        }
      }
    }

    // 4. Delete a single card
    function deleteSingle(btn) {
      const card = btn.closest('.notification-card');
      
      // Add fade out animation
      card.classList.add('fade-out');
      
      // Remove from DOM after animation
      setTimeout(() => {
        card.remove();
        updateCounts();
      }, 300);
    }

    // 5. Mark All as Read
    function markAllAsRead() {
      const unreadCards = document.querySelectorAll('.notification-card.unread');
      
      unreadCards.forEach(card => {
        card.classList.remove('unread');
        const checkBtn = card.querySelector('.btn-mark-read');
        if(checkBtn) checkBtn.remove();
      });

      updateCounts();
      
      //  filtering by unread >>> clear the view
      if(currentFilter === 'unread') {
        filterNotifications('unread'); 
      }
    }

    // 6. Delete Read
    function deleteRead() {
        const readCards = document.querySelectorAll('.notification-card:not(.unread)');

        readCards.forEach((card, index) => {
            setTimeout(() => {
                card.classList.add('fade-out');
                setTimeout(() => {
                    card.remove();
                    updateCounts();
                }, 300);
            }, index * 50); 
        });
    }

    // 7. Filter Tabs (All & Unread)
    function filterNotifications(type) {
        currentFilter = type;
        const allCards = document.querySelectorAll('.notification-card');
        const tabAll = document.getElementById('tabAll');
        const tabUnread = document.getElementById('tabUnread');

        // Toggle Tab Styling
        if(type === 'all') {
            tabAll.classList.add('active');
            tabUnread.classList.remove('active');
        } else {
            tabAll.classList.remove('active');
            tabUnread.classList.add('active');
        }

        // Toggle Card Visibility
        allCards.forEach(card => {
            if (type === 'all') {
                card.style.display = 'flex';
            } else if (type === 'unread') {
                if (card.classList.contains('unread')) {
                    card.style.display = 'flex';
                } else {
                    card.style.display = 'none';
                }
            }
        });
    }
  </script>
</body>
</html>