  <!doctype html>
  <html lang="en">
  <head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Jobs Management</title>
  <!-- CSS Links -->
  <link rel="stylesheet" href="../assets/css/bootstrap.min.css" />
  <link rel="stylesheet" href="../assets/css/all.min.css" />
  <link rel="stylesheet" href="../assets/css/styles.css" />
  <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/dataTables.bootstrap5.min.css"/>

  <!-- Internal Style For Modals -->
  <style>
  /* ===== Jobs Tabs ===== */
  .jobs-tabs{
    display:flex;
    gap:12px;
    margin-top:10px;
  }

  .btn-tab{
    border-radius:12px;
    padding:8px 16px;
    font-size:14px;
    border:none;
    background:#f3f4f6;
    color:#374151;
    font-weight:600;
    transition:.2s;
  }

  .btn-tab.active{
    background:var(--primary-color);
    color:#fff;
  }

  .btn-tab.high{
    background:#FEF2F2;
    color:#E7000B;
  }

  .btn-tab.today{
    background:#F3F4F6;
    color:#374151;
}

  /* ===== Table badges ===== */
  .badge-soft{
    padding:6px 12px;
    border-radius:20px;
    font-weight:600;
    font-size:12px;
    display:inline-flex;
    align-items:center;
  }

  /* Status */
  .status-inprogress{background:#DBEAFE;color:#1E40AF;}
  .status-assigned{background:#F3E8FF;color:#8200DB;}
  .status-completed{background:#DCFCE7;color:#008236;}

  /* Priority */
  .priority-high{background:#FEF2F2;color:#E7000B;border-radius:20px;padding:6px 12px;font-size:12px;font-weight:400;}
  .priority-medium{background:#FEF3C7;color:#92400E;border-radius:20px;padding:6px 12px;font-size:12px;font-weight:400;}
  .priority-low{background:#DCFCE7;color:#008236;border-radius:20px;padding:6px 12px;font-size:12px;font-weight:400;}

  /* Links */
  .link-view{
    color:#2563eb;
    font-weight:600;
    text-decoration:none;
  }
  .link-view:hover{ text-decoration:underline; }

  /* Table wrapper  */
  .jobs-table-wrapper{
    border:0.8px solid #E5E7EB;
    border-radius:16px;
    margin-top:20px;
    overflow:hidden;
    box-shadow:0 2px 3px rgba(0,0,0,.06);
  }
</style>
</head>

  <body>
    <!-- Sidebar Toggle Overlay (Mobile) -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>

  <!-- ===== Sidebar (Desktop) ===== -->
    <aside class="sidebar d-flex flex-column" id="sidebar">
      <!-- 1. Header Section -->
      <div class="sidebar-header">
        <!-- Logo Text -->
        <div class="logo">
          <h4>LockAccess Pro</h4>
          <p>Platform Admin</p>
        </div>

        <!-- Close button (Mobile) -->
        <button class="btn d-md-none text-muted" id="closeSidebar">
          <i class="fas fa-times"></i>
        </button>
      </div>

      <!-- 2. Navigation Menu -->
      <ul class="menu flex-grow-1">
        <li data-page="dashboard" class="active">
          <a href="dashboard.html">
            <i class="fa-solid fa-table-cells-large"></i>
            Dashboard
          </a>
        </li>

        <li data-page="companies">
          <a href="companies.html">
            <i class="fa-regular fa-building"></i>
            Companies
          </a>
        </li>

        <li data-page="company-area">
          <a href="company-area.html">
            <i class="fa-regular fa-building"></i>
            Company Area
          </a>
        </li>

        <li data-page="reports">
          <a href="reports.html">
            <i class="fa-regular fa-file-lines"></i>
            Reports
          </a>
        </li>

        <li data-page="jobs">
          <a href="jobs.html">
            <i class="fa-solid fa-user-group"></i>
            Jobs
          </a>
        </li>

        <li data-page="notifications">
          <a href="notifications.html">
            <i class="fa-regular fa-bell"></i>
            Notifications
          </a>
        </li>

        <li data-page="customers">
          <a href="customers.html">
            <i class="fa-solid fa-user-group"></i>
            Customer
          </a>
        </li>

        <li data-page="users">
          <a href="users.html">
            <i class="fa-solid fa-user-group"></i>
            Users
          </a>
        </li>

          <li data-page="calls">
          <a href="calls.html">
          <i class="fa-solid fa-mobile-screen"></i>Call Logs
          </a>
        </li>
      </ul>
      <!-- 3. Sidebar Footer (User Profile) -->
      <div class="sidebar-footer">
        <div class="d-flex align-items-center gap-3">
          <!-- Avatar Circle -->
          <div class="user-avatar" id="userAvatar">U</div>

          <!-- Text Info -->
          <div class="user-info">
            <h6 id="sidebarUsername">User</h6>
            <small id="sidebarEmail">user@email.com</small>
          </div>
        </div>
      </div>
    </aside>

  <!-- ===== Main Wrapper ===== -->
    <div class="main-wrapper" id="mainWrapper">
    
    <!-- 1. Mobile Header (Visible only on mobile/tablet) -->
    <div class="d-lg-none p-3 bg-white border-bottom d-flex align-items-center justify-content-between sticky-top">
      <h5 class="m-0 fw-bold text-dark">LockAccess Pro</h5>
      <button class="btn btn-light" id="toggleSidebar">
        <i class="fas fa-bars"></i>
      </button>
    </div>

    <!-- 2. Main Content Area -->
    <main class="mb-4">
      <!-- Page Header (Desktop View title) -->
      <div class="d-flex flex-column justify-content-left mb-4">
        <h3 class="page-title">Jobs Management</h3>
        <p class="page-subtitle">Monitor and manage all jobs across all companies.</p>
      </div>

      <!-- Main Data Content -->
      <div class="row content g-3 align-items-center">

      <!-- Search + Filter -->
      <div class="row g-3 align-items-center">
      <div class="col-lg-9">
      <div class="search-box">
        <i class="fas fa-search"></i>
        <input type="text" id="customSearch" placeholder="Search by job ID, company, customer, or type..." />
      </div>
      </div>

      <div class="col-lg-3 d-flex justify-content-end align-items-center gap-2">
      <i class="fas fa-filter text-muted"></i>
      <div class="select-box w-100">
        <select id="statusFilter">
          <option value="">All Status</option>
          <option value="Pending">Pending</option>
          <option value="Assigned">Assigned</option>
          <option value="In Progress">In Progress</option>
          <option value="Completed">Completed</option>
          <option value="Cancelled">Cancelled</option>
        </select>
      </div>
      </div>
      </div>

      <!-- Tabs -->
    <div class="jobs-tabs mt-3">
    <button class="btn-tab active" data-filter="all">All Jobs (6)</button>
    <button class="btn-tab high" data-filter="high">High Priority (3)</button>
    <button class="btn-tab today" data-filter="today">Today (5)</button>
    </div>

    <!-- Table -->
    <div class="table-responsive mt-3">
      <table id="jobsTable" class="table w-100">
        <thead>
          <tr>
            <th>Job ID</th>
            <th>Company</th>
            <th>Type</th>
            <th>Customer</th>
            <th>Technician</th>
            <th>Status</th>
            <th>Priority</th>
            <th>Amount</th>
            <th>whatsapp</th>
            <th>Details</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
      </div>
      </div>


    </main>
    </div>

  <!-- JS -->
  <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
  <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
  <script src="https://cdn.datatables.net/1.13.6/js/dataTables.bootstrap5.min.js"></script>
  <script src="../assets/js/bootstrap.bundle.min.js"></script>
  <script src="../assets/js/script.js"></script>

<script>
//// Company Table Logic ////

let jobsTable;

const MOCK_JOBS = [
  {id:"JOB-1234", company:"QuickLock Services", type:"Emergency Lockout", customer:"John Doe", technician:"John Smith", status:"In Progress", priority:"High", amount:150},
  {id:"JOB-1235", company:"SecureAccess Inc", type:"Routine Maintenance", customer:"Jane Smith", technician:"Alice Johnson", status:"Completed", priority:"Medium", amount:200},
  {id:"JOB-1236", company:"MasterKey Solutions", type:"Emergency Lockout", customer:"Bob Wilson", technician:"Charlie Brown", status:"Assigned", priority:"High", amount:180},
  {id:"JOB-1237", company:"City Lock & Key", type:"New Installation", customer:"David Lee", technician:"Eva Green", status:"Pending", priority:"Low", amount:120},
  {id:"JOB-1238", company:"Emergency Locksmith Co", type:"Emergency Lockout", customer:"Frank Miller", technician:"Grace Hall", status:"Cancelled", priority:"High", amount:200},
  {id:"JOB-1239", company:"Emergency Locksmith Co", type:"Emergency Lockout", customer:"Jane Smith", technician:"Grace Hall", status:"Assigned", priority:"High", amount:200},
  {id:"JOB-1240", company:"Emergency Locksmith Co", type:"Emergency Lockout", customer:"Jane Smith", technician:"Grace Hall", status:"Assigned", priority:"Medium", amount:200},
  {id:"JOB-1241", company:"Emergency Locksmith Co", type:"Emergency Lockout", customer:"Jane Smith", technician:"Grace Hall", status:"Completed", priority:"Low", amount:200}
];

$(document).ready(function(){

  jobsTable = initDataTable(
    "#jobsTable", MOCK_JOBS, [
      { data: "id" },
      { data: "company" },
      { data: "type" },
      { data: "customer" },
      { data: "technician" },
      { 
        data: "status",
        render: (d) => window.renderStatusBadge(d),
      },
      { 
        data: "priority",
        render: (d) => window.renderStatusBadge(d),
      },
      { 
        data: "amount",
        render: d => `$${d.toLocaleString()}`
      },
      {
      data: null,
      render: (row) => `
        <a href="jobChat.html?id=${row.id}" 
        class="text-decoration-none text-primary fw-semibold">
        View
        </a>`
     },
     { 
    data: null,
    render: (row) => `
    <a href="jobDetails.html?id=${row.id}" 
       class="text-decoration-none text-primary fw-semibold">
       View
    </a>`
    }
    ]
  );

  /* Search */
  $("#customSearch").on("keyup",function(){
    jobsTable.search(this.value).draw();
  });

 /* Status Filter */
  $("#statusFilter").on("change", function(){
  const val = this.value;

  if(val){
    jobsTable
      .column(5) 
      .search(val, false, true)
      .draw();
  } else {
    jobsTable
      .column(5)
      .search("")
      .draw();
  }
  });
  
  /* Tabs */
  $(".btn-tab").on("click", function(){
    const filter = $(this).data("filter");
    $(".btn-tab").removeClass("active");
    $(this).addClass("active");
    if(filter === "all"){
      jobsTable.column(6).search("").draw();
    } else if(filter === "high"){
      jobsTable.column(6).search("High").draw();
    } else if(filter === "today"){
      jobsTable.column(6).search("High").draw();
    }
  });

    });
  </script>

  </body>
  </html>