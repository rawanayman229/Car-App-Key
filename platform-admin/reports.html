<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Reports Management</title>

    <!-- CSS Links-->
    <link rel="stylesheet" href="../assets/css/bootstrap.min.css" />
    <link rel="stylesheet" href="../assets/css/apexcharts.css" />
    <link rel="stylesheet" href="../assets/css/all.min.css" />
    <link rel="stylesheet" href="../assets/css/styles.css" />
    
    <!-- Internal CSS for specific Report elements -->
    <style>
      /* Key Metrics Grid Cards */
      .metric-card {
        background-color: #F9FAFB;
        border-radius: 12px;
        padding: 20px;
        height: 100%;
        display: flex;
        flex-direction: column;
        justify-content: center;
      }

      .metric-label {
        font-size: 14px;
        color: #6B7280;
        margin-bottom: 8px;
      }

      .metric-value {
        font-size: 28px;
        font-weight: 700;
        color: #111827;
        margin-bottom: 8px;
      }

      .metric-change {
        font-size: 13px;
        font-weight: 500;
      }
      .text-success-custom { color: #00A63E; }
      .text-danger-custom { color: #DC2626; }

      /* Chart containers */
      .chart-container {
        min-height: 320px;
      }
    </style>
  </head>

  <body>
    <!-- Start Of Static Section (Side Bar) -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>

    <aside class="sidebar d-flex flex-column" id="sidebar">
      <!-- 1. Header Section -->
      <div class="sidebar-header">
        <!-- Logo Text -->
        <div class="logo">
          <h4>LockAccess Pro</h4>
          <p>Platform Admin</p>
        </div>

        <!-- Close button (Mobile) -->
        <button class="btn d-md-none text-muted" id="closeSidebar">
          <i class="fas fa-times"></i>
        </button>
      </div>

      <!-- 2. Navigation Menu -->
      <ul class="menu flex-grow-1">
        <li data-page="dashboard" class="active">
          <a href="dashboard.html">
            <i class="fa-solid fa-table-cells-large"></i>
            Dashboard
          </a>
        </li>

        <li data-page="companies">
          <a href="companies.html">
            <i class="fa-regular fa-building"></i>
            Companies
          </a>
        </li>

        <li data-page="company-area">
          <a href="company-area.html">
            <i class="fa-regular fa-building"></i>
            Company Area
          </a>
        </li>

        <li data-page="reports">
          <a href="reports.html">
            <i class="fa-regular fa-file-lines"></i>
            Reports
          </a>
        </li>

        <li data-page="jobs">
          <a href="jobs.html">
            <i class="fa-solid fa-user-group"></i>
            Jobs
          </a>
        </li>

        <li data-page="notifications">
          <a href="notifications.html">
            <i class="fa-regular fa-bell"></i>
            Notifications
          </a>
        </li>

        <li data-page="customers">
          <a href="customers.html">
            <i class="fa-solid fa-user-group"></i>
            Customer
          </a>
        </li>

        <li data-page="users">
          <a href="users.html">
            <i class="fa-solid fa-user-group"></i>
            Users
          </a>
        </li>

          <li data-page="calls">
          <a href="calls.html">
          <i class="fa-solid fa-mobile-screen"></i>            Call Logs
          </a>
        </li>
      </ul>
      <!-- 3. Sidebar Footer (User Profile) -->
      <div class="sidebar-footer">
        <div class="d-flex align-items-center gap-3">
          <!-- Avatar Circle -->
          <div class="user-avatar" id="userAvatar">U</div>

          <!-- Text Info -->
          <div class="user-info">
            <h6 id="sidebarUsername">User</h6>
            <small id="sidebarEmail">user@email.com</small>
          </div>
        </div>
      </div>
    </aside>

    <!-- ===== Main Wrapper (Content) ===== -->
    <div class="main-wrapper" id="mainWrapper">
      <!-- Mobile Header -->
      <div class="d-lg-none p-3 bg-white border-bottom d-flex align-items-center justify-content-between sticky-top">
        <h5 class="m-0 fw-bold text-dark">LockAccess Pro</h5>
        <button class="btn btn-light" id="toggleSidebar">
          <i class="fas fa-bars"></i>
        </button>
      </div>

      <!-- Main Content Area -->
      <main>
        <!-- Header -->
        <div class="d-flex flex-column justify-content-left mb-4">
          <h3 class="page-title">Reports</h3>
          <p class="page-subtitle">Generate and download detailed reports</p>
        </div>

        <!-- Row 1: Top Charts -->
        <div class="row g-4 mb-4">
          <!-- Technician Performance -->
          <div class="col-lg-6">
            <div class="card-box">
              <h6>Technician Performance Overview</h6>
              <div id="performanceChart" class="chart-container"></div>
            </div>
          </div>

          <!-- Jobs & Revenue Trend -->
          <div class="col-lg-6">
            <div class="card-box">
              <h6>Jobs & Revenue Trend</h6>
              <div id="revenueTrendChart" class="chart-container"></div>
            </div>
          </div>
        </div>

        <!-- Row 2: Pie Chart & Metrics Grid -->
        <div class="row g-4">
          <!-- Revenue by Service Type -->
          <div class="col-lg-4">
            <div class="card-box">
              <h6>Revenue by Service Type</h6>
              <div id="serviceTypeChart" class="d-flex justify-content-center align-items-center h-75"></div>
            </div>
          </div>

          <!-- Key Metrics Summary -->
          <div class="col-lg-8">
            <div class="card-box">
              <h6>Key Metrics Summary</h6>
              
              <div class="row g-3">
                <!-- Metric 1 -->
                <div class="col-md-4 col-xl-6">
                  <div class="metric-card">
                    <span class="metric-label">Total Jobs (7 days)</span>
                    <div class="metric-value">83</div>
                    <span class="metric-change text-success-custom">+12% vs last week</span>
                  </div>
                </div>

                <!-- Metric 2 -->
                <div class="col-md-4 col-xl-6">
                  <div class="metric-card">
                    <span class="metric-label">Avg Response Time</span>
                    <div class="metric-value">18 min</div>
                    <span class="metric-change text-success-custom">-3 min improvement</span>
                  </div>
                </div>

                <!-- Metric 3 -->
                <div class="col-md-4 col-xl-6">
                  <div class="metric-card">
                    <span class="metric-label">Completion Rate</span>
                    <div class="metric-value">94%</div>
                    <span class="metric-change text-success-custom">+2% vs last week</span>
                  </div>
                </div>

                <!-- Metric 4 -->
                <div class="col-md-4 col-xl-6">
                  <div class="metric-card">
                    <span class="metric-label">Customer Satisfaction</span>
                    <div class="metric-value">4.7/5</div>
                    <span class="metric-change text-muted">Based on 68 reviews</span>
                  </div>
                </div>

                <!-- Metric 5 -->
                <div class="col-md-4 col-xl-6">
                  <div class="metric-card">
                    <span class="metric-label">Total Revenue (7 days)</span>
                    <div class="metric-value">$19.8k</div>
                    <span class="metric-change text-success-custom">+18% vs last week</span>
                  </div>
                </div>

                <!-- Metric 6 -->
                <div class="col-md-4 col-xl-6">
                  <div class="metric-card">
                    <span class="metric-label">Avg Job Value</span>
                    <div class="metric-value">$238</div>
                    <span class="metric-change text-success-custom">+5% vs last week</span>
                  </div>
                </div>
              </div> <!-- End Inner Row -->

            </div>
          </div>
        </div>
        
      </main>
    </div>

    <!-- JS Files -->
    <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
    <script src="../assets/js/bootstrap.bundle.min.js"></script>
    <script src="../assets/js/apexcharts.min.js"></script>
    <script src="../assets/js/script.js"></script>

    <!-- Chart Configuration -->
    <script>
      /* 1. Technician Performance (Bar Chart - Blue) */
      const performanceEl = document.querySelector("#performanceChart");
      if (performanceEl && typeof ApexCharts !== "undefined") {
        new ApexCharts(performanceEl, {
          series: [{
            name: "Jobs Completed",
            data: [240, 320, 200, 280, 160, 220]
          }],
          chart: {
            type: "bar",
            height: 320,
            toolbar: { show: false },
            fontFamily: "inherit",
          },
          plotOptions: {
            bar: {
              borderRadius: 6,
              columnWidth: "60%",
              distributed: false,
            }
          },
          colors: ["#3B82F6"], 
          dataLabels: { enabled: false },
          xaxis: {
            categories: ['John', 'Sarah', 'Mike', 'Emily', 'David', 'Lisa'],
            axisBorder: { show: false },
            axisTicks: { show: false },
            labels: { style: { colors: "#6B7280", fontSize: "13px" } }
          },
          yaxis: {
            min: 0,
            max: 320,
            tickAmount: 4,
            labels: { style: { colors: "#6B7280", fontSize: "13px" } }
          },
          grid: {
            borderColor: "#E5E7EB",
            strokeDashArray: 4,
          },
          tooltip: {
            y: { formatter: (val) => `${val} Jobs` }
          }
        }).render();
      }

      /* 2. Jobs & Revenue Trend (Line Chart - Green) */
      const revenueTrendEl = document.querySelector("#revenueTrendChart");
      if (revenueTrendEl && typeof ApexCharts !== "undefined") {
        new ApexCharts(revenueTrendEl, {
          series: [{
            name: "Jobs",
            data: [2400, 3200, 1800, 4200, 3800, 2900, 1600]
          }],
          chart: {
            type: "line",
            height: 320,
            toolbar: { show: false },
            fontFamily: "inherit",
          },
          stroke: {
            curve: "smooth",
            width: 3,
          },
          markers: {
            size: 5,
            colors: ["#ffffff"],
            strokeColors: "#10B981",
            strokeWidth: 2,
            hover: { size: 7 }
          },
          colors: ["#10B981"],
          xaxis: {
            categories: ["Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"],
            axisBorder: { show: false },
            axisTicks: { show: false },
            labels: { style: { colors: "#6B7280", fontSize: "13px" } }
          },
          yaxis: {
            min: 0,
            max: 6000,
            tickAmount: 4,
            labels: { style: { colors: "#6B7280", fontSize: "13px" } }
          },
          grid: {
            borderColor: "#E5E7EB",
            strokeDashArray: 4,
          }
        }).render();
      }

      /* 3. Revenue by Service Type (Pie Chart) */
      const serviceTypeEl = document.querySelector("#serviceTypeChart");
      if (serviceTypeEl && typeof ApexCharts !== "undefined") {
        new ApexCharts(serviceTypeEl, {
          series: [35, 25, 25, 15],
          chart: {
            type: "pie",
            height: 300,
            fontFamily: "inherit",
          },
          colors: ["#10B981", "#3B82F6", "#F59E0B", "#EF4444"],
          dataLabels: {
            enabled: false
          },
          legend: {
            position: 'bottom',
            fontSize: '14px',
            markers: { radius: 12 },
            itemMargin: { horizontal: 10, vertical: 5 }
          },
          tooltip: {
            y: { formatter: (val) => `${val}%` }
          },
          stroke: { show: false }
        }).render();
      }
    </script>
  </body>
</html>