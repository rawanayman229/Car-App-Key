<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Companies Management</title>
    <link rel="stylesheet" href="../assets/css/bootstrap.min.css" />
    <link rel="stylesheet" href="../assets/css/all.min.css" />
    <link rel="stylesheet" href="../assets/css/styles.css" />
    <link
      rel="stylesheet"
      href="https://cdn.datatables.net/1.13.6/css/dataTables.bootstrap5.min.css"
    />
  </head>
  <body>
    <!-- Start Of Static Section (Side Bar) -->

    <!-- Sidebar Toggle Overlay (Mobile and Tablet) -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>

    <!-- ===== Sidebar (Desktop) ===== -->
    <aside class="sidebar d-flex flex-column" id="sidebar">
      
      <!-- 1. Header Section -->
      <div class="sidebar-header">
        <!-- Logo Text -->
        <div class="logo">
          <h4>LockAccess Pro</h4>
          <p>Platform Admin</p>
        </div>

        <!-- Close button (Mobile) -->
        <button class="btn d-md-none text-muted" id="closeSidebar">
          <i class="fas fa-times"></i>
        </button>
      </div>

      <!-- 2. Navigation Menu -->
        <!-- 2. Navigation Menu -->
      <ul class="menu flex-grow-1">
        <li data-page="dashboard" class="active">
          <a href="dashboard.html">
            <i class="fa-solid fa-table-cells-large"></i>
            Dashboard
          </a>
        </li>

        <li data-page="companies">
          <a href="companies.html">
            <i class="fa-regular fa-building"></i>
            Companies
          </a>
        </li>

        <li data-page="reports">
          <a href="reports.html">
            <i class="fa-regular fa-file-lines"></i>
            Reports
          </a>
        </li>

        <li data-page="jobs">
          <a href="jobs.html">
            <i class="fa-solid fa-user-group"></i>
            Jobs
          </a>
        </li>

        <li data-page="notifications">
          <a href="notifications.html">
            <i class="fa-regular fa-bell"></i>
            Notifications
          </a>
        </li>

        <li data-page="customers">
          <a href="customers.html">
            <i class="fa-solid fa-users"></i>
            Customers
          </a>
        </li>
      </ul>
      <!-- 3. Sidebar Footer (User Profile) -->
      <div class="sidebar-footer">
      <div class="d-flex align-items-center gap-3">
      <!-- Avatar Circle -->
      <div class="user-avatar" id="userAvatar">U</div>

      <!-- Text Info -->
      <div class="user-info">
      <h6 id="sidebarUsername">User</h6>
      <small id="sidebarEmail">user@email.com</small>
    </div>
    </div>
    </div>
    </aside>
    <!-- End OF Sidebar -->
    
    <!-- ===== Main Wrapper ===== -->
    <div class="main-wrapper">
      
      <!-- Mobile Header -->
      <div class="d-lg-none py-3 d-flex align-items-center justify-content-between mb-3">
        <h5 class="m-0 fw-bold" style="color: var(--title-color);">LockAccess Pro</h5>
        <button class="btn btn-light" id="toggleSidebar">
            <i class="fas fa-bars"></i>
        </button>
      </div>

      <!-- Page Header -->
      <div class="d-flex flex-column flex-md-row justify-content-between align-items-start align-items-md-center mb-4 gap-3">
        <div>
            <h3 class="page-title">Companies Management</h3>
            <p class="page-subtitle">
            Manage and monitor all locksmith companies on the platform.
            </p>
        </div>
          <!-- Add Company button  -->
          <a href="createCompany.html" class="btn add-company-btn">
            <i class="fas fa-plus me-2"></i>
            Add Company
          </a>
        </div>
        <!-- End of Header  -->

        <!-- Companies  Cards -->
        <div class="row g-4 mb-4">
          <div class="col-sm-6 col-xl-3">
            <div class="data-card">
              <span class="label">Total Companies</span>
              <h3>8</h3>
            </div>
          </div>

          <div class="col-sm-6 col-xl-3">
            <div class="data-card">
              <span class="label">Active</span>
              <h3>5</h3>
            </div>
          </div>

          <div class="col-sm-6 col-xl-3">
            <div class="data-card">
              <span class="label">Suspended</span>
              <h3>2</h3>
            </div>
          </div>
        </div>
        <!-- End Of Company  Cards -->

        <!-- Search and Filter  -->
        <div class="filters mb-4">
          <div class="row g-3 align-items-center">
            <!-- Search -->
            <div class="col-lg-12">
              <div class="search-box">
                <i class="fas fa-search"></i>
                <input
                  type="text"
                  id="customSearch"
                  placeholder="Search companies..."
                />
              </div>
            </div>

          </div>
        </div>
        <!-- End Of Search and Filter  -->

        <!-- Data Table -->
        <div class="table-container">
          <table id="companiesTable" class="table w-100">
            <thead>
              <tr>
                <th>Company Name</th>
                <th>Contact</th>
                <th>Location</th>
                <th>Jobs</th>
                <th>Status</th>
                <th>Edit</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </main>
    </div>

    <!-- JS Files -->
    <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.6/js/dataTables.bootstrap5.min.js"></script>
    <script src="../assets/js/bootstrap.bundle.min.js"></script>
    <script src="../assets/js/script.js"></script>

    <!-- PAGE SPECIFIC SCRIPT -->
    <script>
      let companiesTable;

      const MOCK_COMPANIES = [
        {
          name: "ABC Locksmith",
          date: "2024-01-15",
          email: "contact@abclock.com",
          phone: "(555) 123-4567",
          city: "New York, NY",
          jobs: 145,
          status: "Active",
        },
        {
          name: "QuickLock Services",
          date: "2024-02-20",
          email: "info@quicklock.com",
          phone: "(555) 234-5678",
          city: "Los Angeles, CA",
          jobs: 98,
          status: "Active",
        },
        {
          name: "Master Locks Co",
          date: "2023-11-05",
          email: "service@master.com",
          phone: "(555) 456-7890",
          city: "Houston, TX",
          jobs: 112,
          status: "Suspended",
        },
        {
          name: "City Locksmith",
          date: "2025-01-02",
          email: "help@citylock.com",
          phone: "(555) 678-9012",
          city: "Philadelphia, PA",
          jobs: 45,
          status: "Pending",
        },
        {
          name: "City Locksmith",
          date: "2025-01-02",
          email: "help@citylock.com",
          phone: "(555) 678-9012",
          city: "Philadelphia, PA",
          jobs: 45,
          status: "Pending",
        },
        {
          name: "City Locksmith",
          date: "2025-01-02",
          email: "help@citylock.com",
          phone: "(555) 678-9012",
          city: "Philadelphia, PA",
          jobs: 45,
          status: "Pending",
        },
        {
          name: "City Locksmith",
          date: "2025-01-02",
          email: "help@citylock.com",
          phone: "(555) 678-9012",
          city: "Philadelphia, PA",
          jobs: 45,
          status: "Pending",
        },
        {
          name: "City Locksmith",
          date: "2025-01-02",
          email: "help@citylock.com",
          phone: "(555) 678-9012",
          city: "Philadelphia, PA",
          jobs: 45,
          status: "Pending",
        },
      ];

      //   Company Actions Column
      const companyActions = (row) => [
        {
          icon: "fa-solid fa-pen",
          title: "Edit",
        },
      ];

      $(document).ready(function () {
        window.initDataTable("#companiesTable", MOCK_COMPANIES, [
          {
            data: "name",
            render: (d, t, r) =>
              window.renderDoubleLine(r.name, `Joined ${r.date}`, "company"),
          },
          {
            data: "email",
            render: (d, t, r) =>
              window.renderDoubleLine(r.email, r.phone, "company"),
          },
          { data: "city" },
          { data: "jobs" },
          {
            data: "status",
            render: (d) => window.renderStatusBadge(d),
          },
          {
            data: null,
            orderable: false,
            render: (d, t, row) => window.renderActions(companyActions(row)),
          },
        ]);
      });
    </script>
  </body>
</html>
